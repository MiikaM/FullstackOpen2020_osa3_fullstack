(this["webpackJsonppuhelinluettelo_6-10"]=this["webpackJsonppuhelinluettelo_6-10"]||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),u=t(14),o=t.n(u),c=t(4),l=t(2),i=function(e){var n=e.name,t=e.handleFilter;return r.a.createElement("form",null,r.a.createElement("div",null,"filter people with:",r.a.createElement("input",{value:n,onChange:t})))},m=function(e){var n=e.person,t=e.deleteThis;return r.a.createElement("p",{className:"person"},n.name," ",n.number,r.a.createElement("button",{value:n.id,onClick:t},"delete"))},f=function(e){var n=e.people,t=e.deletePerson;return console.log("people are ",n),r.a.createElement("div",null,n.map((function(e){return r.a.createElement(m,{key:e.id,person:e,deleteThis:t})})))},s=function(e){var n=e.name,t=e.number,a=e.handleName,u=e.handleNumber,o=e.handleSubmit;return r.a.createElement("form",{onSubmit:o},r.a.createElement("div",null,"name:",r.a.createElement("input",{value:n,onChange:a})),r.a.createElement("div",null,"number:",r.a.createElement("input",{value:t,onChange:u})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"Add")))},d=t(3),h=t.n(d),p="/api/persons",v=function(){return h.a.get(p).then((function(e){return e.data}))},b=function(e){return h.a.post(p,e).then((function(e){return e.data}))},E=function(e,n){return h.a.put("".concat(p,"/").concat(e),n).then((function(e){return e.data}))},g=function(e){return h.a.delete("".concat(p,"/").concat(e)).then((function(e){return e.data}))},w=function(e){var n=e.message;return null===n?null:n.startsWith("Information")?r.a.createElement("div",{className:"error"},n):r.a.createElement("div",{className:"notification"},n)},j=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],u=n[1],o=Object(a.useState)(""),m=Object(l.a)(o,2),d=m[0],h=m[1],p=Object(a.useState)(""),j=Object(l.a)(p,2),O=j[0],y=j[1],N=Object(a.useState)(""),S=Object(l.a)(N,2),T=S[0],C=S[1],k=Object(a.useState)(null),A=Object(l.a)(k,2),I=A[0],P=A[1];Object(a.useEffect)((function(){v().then((function(e){u(e)}))}),[]);var F=""===d?t:t.filter((function(e){return e.name.toUpperCase().startsWith(d.toUpperCase())}));return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(w,{message:I}),r.a.createElement(i,{name:d,handleFilter:function(e){return h(e.target.value)}}),r.a.createElement("h3",null,"Add person"),r.a.createElement(s,{name:O,number:T,handleName:function(e){return y(e.target.value)},handleNumber:function(e){return C(e.target.value)},handleSubmit:function(e){e.preventDefault();var n=t.find((function(e){return e.name===O.trim()}));if(void 0===n){var a={name:O.trim(),number:T.trim()};b(a).then((function(e){u(t.concat(e)),y(""),C(""),P("Added ".concat(e.name," ")),setTimeout((function(){P(null)}),5e3)})).catch((function(e){P("Can't add a person with no name"),setTimeout((function(){P(null)}),5e3),y(""),C("")}))}else window.confirm("".concat(O," is already added to phonebook, replace the old number with a new one?"))&&function(e){var n=e.person,a=n.id,r=Object(c.a)(Object(c.a)({},n),{},{number:T.trim()});E(a,r).then((function(e){u(t.map((function(n){return n.id!==a?n:e}))),y(""),C(""),P("".concat(e.name,"'s number was updated")),setTimeout((function(){P(null)}),5e3)})).catch((function(e){P("Information of ".concat(r.name," was already removed from the server")),setTimeout((function(){P(null)}),5e3),y(""),C(""),u(t.filter((function(e){return e.id!==a})))}))}({person:n})}}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(f,{people:F,deletePerson:function(e){console.log("Eventti on",e.target.value);var n=e.target.value,a=t.find((function(e){return e.id===n}));window.confirm("Are you sure you want to remove ".concat(a.name," ?"))&&g(n).then((function(e){P("".concat(a.name," has been removed from the server")),setTimeout((function(){P(null)}),2e3),u(t.filter((function(e){return e.id!==n})))})).catch((function(e){P("Information of '".concat(a.name,"' was already removed from server")),setTimeout((function(){P(null)}),2e3)}))}}))};t(37);o.a.render(r.a.createElement(j,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.517fd498.chunk.js.map